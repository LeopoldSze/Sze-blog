## 目录结构

Linux的目录结构是一个树形结构，Windows系统可以拥有多个盘符，Linux没有盘符这个概念，只有一个根目录 / ，所有文件都在它下面。

- 出现在开头的 / 表示：根目录
- 出现在后面的 / 表示：层次关系



## 命令

本体是一个个的二进制可执行程序，和Windows系统中的 `.exe` 文件，是一个意思。



### ls

作用：列出目录下的内容。

语法：`ls  [-a  -l  -h]  [路径]`

当不使用选项和参数，直接使用ls命令本体，表示：以平铺形式，列出当前工作目录下的内容

Linux系统的命令行终端，在启动的时候，默认会加载：

- 当前登录用户的HOME目录作为当前工作目录
- HOME目录：每个Linux操作用户再Linux系统的个人账号目录，路径在：`/home/用户名`

[-a]：显示隐藏的文件/文件夹

[-l]：以列表（竖向排列）的形式展示内容，并展示更多信息

[-h]：表示以易于阅读的形式，以更加人性化的方式显示文件的大小单位，必须和 `-l` 一起使用 

<br />



### cd

作用：更改当前的工作目录。

语法：`cd  [Linux路径]`

- 无需选项，只有参数，表示要切换到哪个目录下
- 直接执行，不写参数，表示回到用户的HOME目录

<br />



### pwd

作用：查看当前所在的工作目录。

语法：`pwd`

- 无选项，无参数，直接输入 `pwd` 即可

<br />



### 路径

绝对路径：以根目录为起点，路径描述以 / 开头。

相对路径：以当前目录为起点，路径描述无需以 / 开头。

特殊路径符：

- . 表示当前目录，比如 `cd ./xxx` 和 `cd xxx` 效果一致
- .. 表示上一级目录，比如 `cd ..` 即可切换到上一级目录，`cd ../..` 切换到上二级目录
- ~ 表示HOME目录

<br />



### mkdir

作用：创建目录

语法：`mkdir  [-p]  linux路径`

- 参数必填，表示Linux路径，即要创建的文件夹的路径，相对路径或绝对路径均可
- -p 选项可选，表示自动创建不存在的父目录，适用于创建连续多层级的目录

<br />



### touch

作用：创建文件

语法：`touch linux路径`

- touch 语法无选项，参数必填，表示要创建的文件路径，相对、绝对、特殊路径符均可使用。

<br />



### cat

作用：查看文件内容

语法：`cat  linux路径`

- cat 语法无选项，参数必填，表示要创建的文件路径，相对、绝对、特殊路径符均可使用。

<br />



### more

作用：查看文件内容

语法：`more  linux路径`

- more 语法无选项，参数必填，表示要创建的文件路径，相对、绝对、特殊路径符均可使用。
- cat 是直接将内容全部显示出来，more 支持翻页，如果文件内容过多，可以一页页的展示
- 在查看的过程中，通过空格往下翻页，通过 b 往上翻页，通过 q 退出查看

<br />



### cp

作用：复制文件、文件夹

语法：`cp  [-r]  参数1  参数2`

- -r 选项，可选，用于复制文件夹使用，表示递归
- 参数1，Linux路径，表示被复制的文件或文件夹
- 参数2，Linux路径，表示要复制去的地方

<br />



### mv

作用：用于移动文件、文件夹

语法：`mv  参数1   参数2`

- 参数1，Linux路径，表示被移动的文件或文件夹
- 参数2，Linux路径，表示要移动去的地方，如果目标不存在，则进行改名，确保目标存在

<br />



### rm

作用：删除文件、文件夹

语法：`rm  [-r  -f]   参数1  参数2  ....  参数N`

- 同 cp 命令一样，-r 选项用于删除文件夹
- -f 表示force，强制删除（不会弹出提示确认信息）
  - 普通用户删除内容不会弹出提示，只有root管理员用户删除内容会有提示
  - 所以一般普通用户用不到 -f 选项
- 参数1、参数2、....、参数N表示要删除的文件或文件夹路径，按照空格隔开

rm 命令支持通配符 *，用来做模糊匹配：

- 符号*表示通配符，即匹配任意内容（包含空）
  - test*：表示匹配任何以test开头的内容
  - *test：表示匹配任何以test结尾的内容
  - \*test*：表示匹配任何包含test的内容

<br />



### which

作用：查看所使用的一系列命令的程序文件存放地址

语法：`which   要查找的命令`

<br />



### find

作用：搜索指定的文件

语法：

- 按文件名搜索：`find   起始路径  -name  “被查找的文件名”`
  - 同样可以使用通配符*
  - 例如：`find  /  -name  *test*`
- 按文件大小搜索：`find   起始路径  -size   +|-n[kMG]`
  - +、-表示大于和小于
  - n表示大小数字
  - kMG表示大小单位，k(小写字母)表示kb，M表示MB，G表示GB
  - 例如：`find  /  -size   -10k`

<br />



### grep

作用：从文件中通过关键字过滤文件行

语法：`grep  [-n]  关键字   文件路径`

- 选项 -n 可选，表示在结果中显示匹配的行的行号
- 参数，关键字，必填，表示过滤的关键字，带有空格或其他特殊符号，建议使用“ “将关键字包围起来
- 参数，文件路径，必填，表示要过滤内容的文件路径，**可作为内容输入端口**

<br />



### wc

作用：统计文件的行数、单词数量等。

语法：`wc  [-c  -m  -l  -w]  文件路径`

- 选项，-c，统计bytes数量
- 选项，-m，统计字符数量
- 选项，-l，统计行数
- 选项，-w，统计单词数量
- 参数，文件路径，被统计的文件，**可作为内容输入端口**
- 不带选项默认统计：行数、单词数、字节数

<br />



### 管道符 |

作用：将管道符左边命令的结果，作为右边命令的输入

<br />



### echo

作用：在命令行内输出指定内容

语法：`echo   输出的内容`

- 无需选项，只有一个参数，表示要输出的内容，复杂内容可以用“ ”包围
- 反引号``包围的 内容，会被作为命令执行，而非普通字符

<br />



### 重定向符

- \> ，将左侧命令的结果，**覆盖**写入到符号右侧指定的文件中
- \>>，将左侧命令的结果，**追加**写入到右侧指定的文件中
- 例如：`echo  "hello linux" > test.txt`，`ls / >> test.txt`

<br />



### tail

作用：查看文件尾部内容，跟踪文件的最新更改

语法：`tail  [-f  -num]  linux路径`

- 参数，Linux路径，表示被跟踪的文件路径
- 选项，-f，表示持续跟踪
- 选项，-num，表示查看尾部多少行，不填默认10行

<br />



## vim

工作模式：命令模式（默认进入）、输入模式、底线输入模式

| 模式     | 命令  | 描述                                    |
| -------- | ----- | --------------------------------------- |
| 命令模式 | i     | 在当前光标位置进入 `输入模式`           |
| 命令模式 | a     | 在当前光标位置 **之后** 进入 `输入模式` |
| 命令模式 | I     | 在当前行的开头，进入 `输入模式`         |
| 命令模式 | A     | 在当前行的结尾，进入 `输入模式`         |
| 命令模式 | o     | 在当前光标下一行进入 `输入模式`         |
| 命令模式 | O     | 在当前光标上一行进入 `输入模式`         |
| 输入模式 | `Esc` | 任何情况下输入 `Esc` 都能回到命令模式   |



### 命令模式快捷键

| 模式     | 命令          | 描述                             |
| -------- | ------------- | -------------------------------- |
| 命令模式 | 键盘上、键盘k | 向上移动光标                     |
| 命令模式 | 键盘下、键盘j | 向下移动光标                     |
| 命令模式 | 键盘左、键盘h | 向左移动光标                     |
| 命令模式 | 键盘右、键盘l | 向右移动光标                     |
| 命令模式 | 0             | 移动光标到当前行的开头           |
| 命令模式 | $             | 移动光标到当前行的结尾           |
| 命令模式 | `pageup`      | 向上翻页                         |
| 命令模式 | `pagedown`    | 向下翻页                         |
| 命令模式 | /             | 进入搜索模式                     |
| 命令模式 | n             | 向下继续搜索                     |
| 命令模式 | N             | 向上继续搜索                     |
| 命令模式 | dd            | 删除光标所在行的内容             |
| 命令模式 | ndd           | n是数字，表示删除当前光标向下n行 |
| 命令模式 | yy            | 复制当前行                       |
| 命令模式 | nyy           | n是数字，复制当前行和下面的n行   |
| 命令模式 | p             | 粘贴复制的内容                   |
| 命令模式 | u             | 撤销修改                         |
| 命令模式 | `ctrl + r`    | 反向撤销修改                     |
| 命令模式 | gg            | 跳到首行                         |
| 命令模式 | G             | 跳到行尾                         |
| 命令模式 | dG            | 从当前行开始，向下全部删除       |
| 命令模式 | dgg           | 从当前行开始，向上全部删除       |
| 命令模式 | d$            | 从当前光标开始，删除到本行的结尾 |
| 命令模式 | d0            | 从当前光标开始，删除到本行的开头 |

<br />



### 底线命令模式

| 默认         | 命令       | 描述         |
| ------------ | ---------- | ------------ |
| 底线命令模式 | :wq        | 保存并退出   |
| 底线命令模式 | :q         | 仅退出       |
| 底线命令模式 | :q!        | 强制退出     |
| 底线命令模式 | :w         | 仅保存       |
| 底线命令模式 | :set nu    | 显示行号     |
| 底线命令模式 | :set paste | 设置粘贴模式 |



## root

Windows、Linux、Mac系统均采用多用户模式。

Linux系统中唯一超级管理员为 `root` ，拥有最大的系统操作权限。

- 普通用户的权限，一般在其HOME目录内是不受限的
- 一旦出了HOME目录，大多数地方，普通用户仅有只读和执行权限，无修改权限

 

### su

su命令就是用户账户切换的系统命令，来源英文单词 `Switch User`

语法：`su [-] [用户名]`

- -是可选的，表示是否在切换用户后加载环境变量，建议带上
- 参数：用户名，表示要切换的用户，用户名也可以省略，省略表示切换到 `root`
- **切换用户后，可以通过exit命令退回上一个用户，也可以使用快捷键：Ctrl +  d**
- 使用普通用户，切换到其他用户需要输入密码
- 使用root用户切换到其他用户，无需密码，可以直接切换

<br />



### sudo

不建议长期使用root用户，避免带来系统损坏。

可以使用 `sudo` 命令，为普通的命令授权，临时以 root 身份执行。

语法：`sudo 其他命令`

- 在其他命令之前，带上 sudo，即可为这条命令临时赋予root授权
- 但是并不是所有的用户，都有权利使用sudo，我们**需要为普通用户配置sudo认证**

<br />



### 为普通用户配置sudo认证

- 切换到root用户，执行 `visudo` 命令，会自动通过 vi  编辑器打开：`/etc/sudoers`

- 在文件的最后添加：

  `用户名 ALL=(ALL)	NOPASSWD: ALL`

  然后 `:wq` 保存

- 切换回普通用户，sudo 执行的命令，均以root运行

<br />



## 用户&用户组

Linux系统中可以：

- 配置多个用户
- 配置多个用户组
- 用户可以加入多个用户组中

Linux中关于权限的管控级别有2个级别，分别是：

- 针对用户的权限控制
- 针对用户组的权限控制



### 用户组管理

需root用户执行

- 创建用户组：`groupadd   用户组名`
- 删除用户组：`groupdel   用户组名`

<br />



### 用户管理

需root用户执行

- 创建用户：`useradd  [-g  -d]  用户名`
  - 选项：-g指定用户的组，不指定-g，会创建同名组并自动加入，指定-g需要组已经存在，如已存在同名组，必须使用-g
  - 选项：-d指定用户HOME路径，不指定，HOME目录默认在：`/home/用户名`
- 删除用户：`userdel  [-r]  用户名`
  - 选项：-r，删除用户的HOME目录，不使用-r，删除用户时，HOME目录保留
- 查看用户所属组：`id  [用户名]`
  - 参数：用户名，被查看的用户，如果不提供则查看自身
- 修改用户所属组：`usermod -aG  用户组 用户名`，将指定用户加入指定用户组

<br />



### getent

作用：查看当前系统中有哪些用户、用户组

语法：

- 查看用户：`getent passwd`
  - 信息：7份，密码(x):用户ID:组ID:描述信息(无用):HOME目录:执行终端(默认bash)
- 查看用户组：`getent group`
  - 信息：3份，组名称:组认证(x):组ID

<br />



### 权限控制信息

第一项：权限细节。

权限细节共分为10个槽位：

- 第一位：- 或 d 或 l，- 表示文件，d 表示文件夹，l 表示软链接
- 第2-4位：所属用户权限，r 或 -，w 或 -，x 或 -
- 第5-7位：所属用户组权限，r 或 -，w 或 -，x 或 -
- 第8-10位：其他用户权限，r 或 -，w 或 -，x 或 -

rwx:

- r 表示读权限，针对文件可以查看文件内容，针对文件夹，可以查看文件夹内容，如 ls 命令
- w 表示写权限，针对文件表示可以修改此文件，针对文件夹，可以在文件夹内：创建、删除、改名等操作
- x 表示执行权限，针对文件表示可以将文件作为程序执行，针对文件夹，表示可以更改工作目录到此文件夹，即 cd 进入

<br />



### chmod

作用：root用户修改文件、文件夹的权限信息。

语法：`chmod  [-R]  权限   文件或文件夹`

- 选项：-R，对文件夹内的全部内容应用同样的操作

示例：

- `chmod u=rwx,g=rx,o=x hello.txt` ：将文件权限修改为： `rwxr-x--x`
  - u 表示user所属用户权限，g 表示group组权限，o 表示other其他用户权限
- `chmod -R u=rwx,g=rx,o=x test`：将文件夹test以及文件夹内全部内容权限设置为：`rwxr-x--x`

**权限的数字序号：**

权限可用3位数字来代表，第一位数字表示用户权限，第二位表示用户组权限，第三位表示其他用户权限。

数字的细节如下：r 记为4，w 记为2，x 记为1，可以有：

- 0：无任何权限，即---
- 1：仅有x权限，即--x
- 2：仅有w权限，即-w-
- 3：有w和x权限，即-wx
- 4：仅有r权限，即r--
- 5：有r和x权限，即r-x
- 6：有r和w权限，即rw-
- 7：有全部权限，即rwx

所以 `chmod 751 test` 表示 `rwxr-x--x`

<br />



### chown

作用：修改文件、文件夹的所属用户和用户组，普通用户无法修改所属为其他用户或组，所以此命令只适用于root用户执行

语法：`chown  [-R]  [用户] [:] [用户组]  文件或文件夹`

- 选项：-R，同 `chmod` ，对文件夹内全部内容应用相同规则
- 选项：用户，修改所属用户
- 选项：用户组，修改所属用户组
- ：用于分隔用户和用户组

示例：

- `chown root hello.txt`：将hello.txt所属用户修改为root
- `chown :root hello.txt`：将 hello.txt 所属用户组修改为root组

<br />



## 实用

### 1. 快捷键

**命令相关：**

- `ctrl + c`：强制停止，退出当前命令
- `ctrl + d`：退出账户的登录，退出某些特定程序的专属页面，不能用于退出 vi/vim。
- `history`：查看历史输入过的命令
- `!`：通过!命令前缀，自动执行上一次匹配前缀的命令
- `ctrl + r`：输入内容去匹配历史命令，如果搜索到底内容是需要的，回车可以直接执行，键盘左右键可以得到此命令（不执行）

**光标移动：**

- `ctrl + a`：光标跳到命令开头
- `ctrl + e`：光标跳到命令结尾
- `ctrl + 键盘左键`：光标向左跳一个单词
- `ctrl + 键盘右键`：光标向右跳一个单词

 **清屏：**

- `ctrl + l` 或者 `clear`：清空终端内容

<br />



### 2. yum

`yum`：RPM 包软件管理器，用于自动化安装配置 Linux 软件，并可以自动解决依赖问题。

语法：`yum  [-y]  [install | remove | search]  软件名称`

- 选项：-y ，自动确认，无需手动确认安装或卸载过程
- install：安装
- remove：卸载
- search：搜索

::: warning

yum 命令需要 root 权限，或使用 sudo 提权。

yum 命令需要联网

:::

- `yum [-y] install wget`：通过 yum 命令安装 wget 程序
- `yum [-y] remove wget`：通过 yum 命令卸载 wget 程序
- `yum search wget`：通过 yum 命令搜索是否有 wget 安装包

<br />



### 3. apt

`CentOs` 使用 yum 管理器和 `.rpm` 包，`Ubuntu` 使用 apt 管理器和 `.deb` 包。

语法：`apt  [-y]  [install | remove | search] 软件名称`

用法和 yum 一致，同样需要 root 权限。

- `apt install wget`：安装 wget 程序
- `apt remove wget`：卸载 wget 程序
- `apt search wget`：搜索 wget 程序

<br />



### 4. systemctl

Linux 系统很多软件（内置或者第三方）均支持使用 `systemctl` 命令控制：启动、停止、开机自启

能够被 `systemctl` 管理的软件，一般也称之为：**服务**。

语法：`systemctl start | stop | status | enable | disable  服务名`

- start：启动
- stop：关闭
- status：查看状态
- enable：开启开机自启
- disable：关闭开机自启

系统内置的服务比较多，比如：

- NetworkManager：主网络服务
- network：副网络服务
- firewalld：防火墙服务
- sshd/ssh：远程登录使用的服务

<br />



### 5. ln

在系统中创建软链接，可以将文件、文件夹链接到其他位置。

类似Windows系统中的《快捷方式》。

语法：`ln -s  参数1  参数2`

- -s 选项：创建软链接
- 参数1：被链接的文件或文件夹
- 参数2：要链接去的目的地

实例：

- `ln -s  /ect/yum.conf ~/yum.conf`
- `ln -s  /etc/yum ~/yum`

<br />



### 6. date

通过 date 命令可以在命令行中查看系统的时间。

语法：`date [-d] [+格式化字符串]`

- -d 按照给定的字符串显示日期，一般用于日期计算
  - `date -d "+1 day“ ”+%Y%m%d"`：显示后一天的日期
  - 支持的时间标记为：`year`年、`month`月、`day`天、`hour`小时、`minute`分钟、`second`秒
- 格式化字符串：通过特定的字符串标记，来控制显示的日期格式
  - %Y：年
  - %y：年份后两位数字（00,99）
  - %m：月份（01,12）
  - %d：日（01,31）
  - %H：小时（00,23）
  - %M：分钟（00,59）
  - %S：秒（00,60）
  - %s：自 `1970-01-01 00:00:00 UTC` 到现在的秒数

实例：

- `date "+%Y-%m-%d %H:%M:%S"`：格式化显示日期

<br />



### 7. 修改时区

使用root权限，执行如下命令，修改时区为东八区：

`rm -f /etc/localtime`

`sudo ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime`

将系统自带的 localtime 文件删除，并将 `/usr/share/zoneinfo/Asia/Shanghai` 文件链接为 localtime 文件即可。

<br />



### 8. ntp

可以通过ntp程序自动校准系统时间。

安装ntp：`apt install ntp`

启动并设置开机自启：

- `systemctl start ntp`
- `systemctl enable ntp`

也可以手动校准（需root权限）：`ntppdate -u ntp.aliyun.com`

<br />



### 9. IP地址

可以通过命令 `ifconfig` ，查看本机的IP地址，如果无法使用命令，可以安装 `apt -y install net-tools`。

- `127.0.0.1`：这个IP地址用于指代本机
- `0.0.0.0`：
  - 可以用于指代本机
  - 可以在端口绑定中用来确定绑定关系
  - 在一些IP地址限制中，表示所有IP的意思，如放行规则设置为此，表示允许任意IP访问

<br />



### 10. 主机名

每一台电脑除了对外联络地址（IP地址）以外，也可以有一个名字，称之为主机名。无论是Windows或Linux系统，都可以给系统设置主机名。

- 查看Linux系统主机名：`hostname`
- 修改主机名（需root）：`hostnamectl set-hostname 主机名`

<br />



### 11. 域名解析

域名解析先查询本地hosts记录，没有再访问外部 DNS 服务器查询对应的 IP 地址。

- Windows系统：`windows/system32/drivers/etc/hosts`
- Linux系统：`/etc/hosts`

<br />



### 12. 配置固定IP

1. 在VMware中配置IP地址网关和网段（IP地址的范围）
2. 在Linux系统中手动修改配置文件，固定IP
   - 切换到root用户
   - 使用 vim 编辑 `/etc/sysconfig/network-scripts/ifcfg-ens33` 文件，修改 `BOOTPROTO` 为 `static`，增加 `IPADDR  NETMASK  GATEWAY  DNS1` 配置项
   - 执行 `systemctl restart newwork` 重启网卡，执行 `ifconfig` 即可看到固定的IP地址

<br />



### 13. ping

通过 ping 命令，检查指定的网络服务器是否是可联通状态。

语法：`ping [-c num] ip或主机名`

- 选项：-c，检查的次数，不使用-c 选项，将无限次数持续检查
- 参数：IP或主机名，被检查的服务器的IP地址或主机名地址

示例：

- 检测百度3次：`ping -c 3 baidu.com`

<br />



### 14. wget

是非交互式的文件下载器，可以在命令行内下载网络文件。

语法：`wget [-b] url`

- 选项：-b，可选，后台下载，会将日志写入到当前工作目录的 `wget-log` 文件
- 参数：url，下载链接

通过 tail 命令可以监控后台下载进度：`tail -f wget-log`

::: warning

无论下载是否完成，都会生成它要下载的文件，如果下载未完成，请及时清理未完成的不可用文件。

<br />



### 15. curl

可以发送 http 网络请求，可用于：下载文件、获取信息等。

语法：`curl [-O] url`  (大写字母O)

- 选项：-O，用于下载文件，当 url 是下载链接时，可以使用此选项保存文件
- 参数：url，要发起请求的网络地址

示例：

- 向 cip.cc 发起网络请求：`curl cip.cc`



### 16. 端口

是设备与外界通讯交流的出入口。端口可以分为：物理端口和虚拟端口两类。

- 物理端口：又可以称之为接口，是可见的端口，如 USB 接口、RJ45 网口、HDMI 端口等
- 虚拟端口：是指计算机内部的端口，是不可见的，是用来操作系统和外部进行交互使用的

计算机程序之间的通讯，通过IP只能锁定计算机，但是无法锁定具体的程序。

通过端口可以锁定计算机上具体的程序，确保程序之间进行沟通。

**IP地址相当于小区地址，在小区内可以有许多住户（程序），而门牌号（端口）就是各个住户（程序）的联系地址。**

Linux系统是一个超大号小区，可以支持65535个端口，分为3类进行使用：

- 公认端口：1-1023，通常用于一些系统内置或知名程序的预留使用，如 SSH 服务的22端口，HTTPS 服务的443端口，非特殊需要，不要占用这个范围的端口
- 注册端口：1024-49151，通常可以随意使用，用于松散的绑定一些程序/服务
- 动态端口：49152-65535，通常不会固定绑定程序，而是当程序对外进行网络链接时，用于临时使用



#### 查看端口占用

**nmap**

安装：`yum -y install nmap`

语法：`nmap  被查看的IP地址`



**netstat**

安装：`yum -y install net-tools`

语法：`netstat -anp | grep *`

<br />



### 18. 进程

程序运行在操作系统中，是被操作系统所管理的。

为管理运行的程序，每一个程序在运行的时候，便被操作系统注册为系统中的一个：进程

并会为每一个进程都分配一个独有的：进程ID（进程号）



#### 查看进程：ps

可以通过 ps 命令查看Linux系统中的进程信息。

语法：`ps [-e  -f]`

- 选项：-e，显示出全部的进程
- 选项：-f，以完全格式化的形式展示信息（展示全部信息）

一般来说，固定用法就是：`ps -ef` 列出全部进程的全部信息

从左到右分别是：

- UID：进程所属的用户ID
- PID：进程的进程号ID
- PPID：进程的父ID（启动此进程的其他进程）
- C：此进程的CPU占用率（百分比）
- STIME：进程的启动时间
- TTY：启动此进程的终端序号，如显示?，表示非终端启动
- TIME：进程占用CPU的时间
- CMD：进程对应的名称或启动路径或启动命令



#### 关闭进程：kill

语法：`kill  [-9]  进程ID`

- 选项：-9，表示强制关闭进程。

<br />



### 19. 查看系统资源占用

可以通过 `top` 命令查看CPU、内存的使用情况

默认每5秒刷新一次，按 q 或者 ctrl + c 退出

语法：`top [选项]`

- -p：只显示某个进程的信息
- -d：设置刷新时间，默认是5s
- -c：显示产生进程的完整命令，默认是进程名
- -n：指定刷新次数，比如 `top -n 3` ，刷新输出3次后退出
- -b：以非交互式全屏模式运行，以批次的方式执行top，一般配合 -n 指定输出几次统计信息，将输出重定向到指定文件，比如 `top -b -n 3 > /tmp/top.tmp`
- -i：不显示任何闲置（idle）或无用（zombie）的进程
- -u：查找特定用户启动的进程



- 第一行
  - top：命令名称
  - 当前系统时间
  - 已启动时长
  - 多少个用户登录
  - 1、5、15分钟负载
- 第二行
  - tasks：多少个进程
  - 运行中的进程
  - 睡眠进程
  - 停止进程
  - 僵尸进程
- 第三行
  - Cpus：CPU使用率
  - us：用户CPU使用率
  - sy：系统CPU使用率
  - ni：高优先级进程占用CPU时间百分比
  - id：空闲CPU率
  - wa：IO等待CPU占用率
  - hi：CPU硬件中断率
  - si：CPU软件中断率
  - st：强制等待占用CPU率
- 第四、第五行
  - Kib Mem：物理内存  |   total：总量   |  free：空闲   |  used：使用  |  buff/cache：buff和cache占用
  - Kib Swap：虚拟内存（交换空间） |   total：总量   |   free：空闲   |  used：使用  |  buff/cache：buff和cache占用



**top命令内容详解**

- PID：进程ID
- USER：进程所属用户
- PR：进程优先级，越小越高
- NI：负值表示高优先级，正表示低优先级
- VIRT：进程使用虚拟内存，单位KB
- RES：进程使用物理内存，单位KB
- SHR：进程使用共享内存，单位KB
- S：进程状态（S休眠，R运行，Z僵死状态，N负数优先级，I空闲状态）
- %CPU：进程占用CPU率
- %MEM：进程占用内存率
- TIME+：进程使用CPU时间总计，单位10ms
- COMMAND：进程的命令或名称或程序文件路径



<br />



### 20. 磁盘信息监控

#### df

使用 df 命令，可以查看磁盘的使用情况

语法：`df [-h]`

选项：-h，以更加人性化的单位显示



#### iostat

可以使用 `iostat` 查看CPU、磁盘的相关信息

语法：`iostat [-x] [num1] [num2]`

- 选项：-x，显示更多信息
- num1：数字，刷新间隔
- num2：数字，刷新几次

<br />



### 21. 网络状态监控

可以使用 `sar` 命令查看网络的相关统计（sar命令非常复杂，这里仅简单用于统计网络）

语法：`sar -n DEV num1 num2`

- 选项：-n，查看网络，DEV表示查看网络接口
- num1：刷新间隔
- num2：查看次数（不填无限次）

<br />



### 22. 环境变量

 环境变量是操作系统在运行的时候，记录的一些关键性信息，用于辅助系统运行。

在Linux系统中执行：env 命令即可查看当前系统中记录的环境变量。

环境变量是一种 `KeyValue` 型结构，即名称和值。



#### PATH

记录了系统执行任何命令的搜索路径（以:隔开）



#### $

在Linux系统中，$ 符号被用于取“变量”的值。

环境变量记录的信息，除了给操作系统自己使用外，如果我们想要取用，也可以使用。

取得环境变量的值就可以通过语法：`$环境变量名` 来取得

如：`echo $PATH` 、`echo ${PATH}ABC`



#### 自行设置环境变量

分为：

- 临时设置
  - 语法：`export 变量名=变量值`
- 永久生效
  - 针对当前用户生效，配置在当前用户的 `~/.bashrc` 文件中
  - 针对所有用户生效，配置在系统的 `/etc/profile` 文件中
  - 并通过语法 `source 配置文件` ，进行立刻生效，或重新登录 `FinalShell` 生效



#### 自定义环境变量PATH

`export PATH=$PATH:/home/xxx`



<br />



### 23. 上传和下载

可以通过rz、sz 命令进行文件传输。需要安装：`yum -y install lrzsz`



**rz 上传**

- 语法：`rz`



**sz 下载**

- 语法：`sz 要下载的文件`

<br />



### 24. 压缩和解压

市面上有非常多的压缩格式：

- zip：Linux、Windows、MacOS 常用
- 7zip：Windows常用
- rar：Windows常用
- tar：Linux、MacOS常用
- gzip：Linux、MacOS常用



#### tar

Linux和Mac系统常用有2种压缩格式，后缀名分别是：

- .tar：称之为 tarball，归档文件，即简单的将文件组装到一个 .tar 的文件内，并没有太多文件体积的减少，仅仅是简单的封装
- .gz：也常见为.tar.gz，gzip 格式压缩文件，即使用gzip压缩算法将文件压缩到一个文件内，可以极大的减少压缩后的体积

针对这两种格式，使用 tar 命令均可以进行压缩和解压缩的操作。

语法：`tar [-c -v -x -f -z -C] 参数1 参数2 ... 参数N`

- -c：创建压缩文件，用于压缩模式
- -v：显示压缩、解压过程，用于查看进度
- -x：解压模式
- -f：要创建的文件，或要解压的文件，-f 选项必须在所有选项中位置处于最后一个
- -z：gzip模式，不使用-z就是普通的 tarball 模式
- -C：选择解压的目的地，用于解压模式



**tar压缩**

- `tar -cvf test.tar 1.txt 2.txt`：将 1.txt 和 2.txt 压缩到 test.tar 文件内
- `tar -zcvf test.tar.gz 1.txt 2.txt`：将 1.txt 和 2.txt 压缩到 test.tar.gz 文件内，使用gzip模式

::: warning

- -z 选项如果使用的话，一般处于选项位第一个
- -f 选项必须在选项位最后一个

:::



**tar解压**

- `tar -xvf test.tar`：解压 test.tar，将文件解压至当前目录
- `tar -xvf test.tar -C /home/xxx`：解压 test.tar，将文件解压至指定目录（/home/xxx）
- `tar -zxvf test.gz -C /home/xxx`：以gzip模式解压至指定目录

::: warning

- -f 选项：必须在选项组合体的最后一位
- -z：建议在开头位置
- -C：单独使用，和解压所需的其他参数分开

 :::



#### zip

可以使用 zip 命令，压缩文件为 zip 压缩包

语法：`zip [-r] 参数1 参数2 ... 参数N`

- -r：被压缩的包含文件夹的时候，需要使用 -r 选项，和 rm、cp 等命令的 -r 效果一致

示例：

- `zip test.zip 1.txt 2.txt`：将 1.txt 和 2.txt 压缩到 test.zip 文件内
- `zip -r test.zip test 1.txt` ：将 test 文件夹 和 1.txt 文件压缩到 test.zip 文件内



**unzip**

使用 uzip 命令，解压 zip 压缩包

语法：`unzip [-d] 参数`

- -d：指定要解压去的位置，同 tar 的 -C 选项
- 参数：被解压的zip压缩包文件

示例：

- `unzip test.zip`：将 test.zip 解压到当前目录
- `unzip test.zip -d /home/xxx`：将 test.zip 解压到指定文件夹内（/home/xxx）

<br />



## 实战

软件安装部署



### 1. MySQL







